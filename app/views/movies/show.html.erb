<h1>
  <%= image_tag "#{@movie_poster}", alt: "Movie poster image", class: "movie-poster-image" %>
  Info about <%= @movie.title %>
</h1>
<br>

<ul>
  <li>Year: <%= @movie.year %></li>
  <li>Language: <%= @movie.language %></li>
  <li>Country produced: <%= @movie.country_produced %></li>
</ul>

<br>
<h4>Summary</h4>
<p><%= @movie.summary %></p>

<hr>
<div class="container">
  <div class="element">
    <h5>Does it Pass?</h5><br>
    <% if user_signed_in? && !@user_voted %>
      <%= button_to "Pass", movie_votes_path(@movie, params.merge(vote: {vote: 1})), action: :create, method: :post %>
      <%= button_to "Not Pass", movie_votes_path(@movie, params.merge(vote: {vote: -1})), action: :create, method: :post %>
    <% elsif @user_voted %>
      <h5><i>Thanks for already voting on this movie!</i></h5>
    <% elsif !user_signed_in? %>
      <h5><i>Please sign in to vote.</i></h5>
    <% end %>
  </div>
  <div class="element">
    <h5>What's the Bechdel Test Again?</h5>
    <ol>
      <li>The movie has at least 2 named women</li>
      <li>Who talk to each other</li>
      <li>About something besides a man</li>
    </ol>
  </div>
</div>

<% if @movie.up_votes == 0 && @movie.down_votes == 0 %>
  <br>
  <p>No one has voted yet, please vote!</p>
<% else %>
  <%= bar_chart({ Pass: @movie.up_votes, Not: @movie.down_votes}) %>
<% end %>

<hr>
<h4>Leave a Comment</h4>

<%= simple_form_for([@movie, @comment]) do |f| %>

  <%= f.input_field :body %>
  <%= f.button :submit, "Submit" %>

<% end %>

<% if !@comments.nil? %>
  <hr>
  <% @comments.each do |comment| %>
    <p></p>
    <div class="comment">
      <div class="comment-image">
        <% if !comment.user.avatar_url.nil? %>
          <%= image_tag comment.user.avatar_url %>
        <% end %>
      </div>
      <div class="comment-content">
        <h1><%= comment.user.username %></h1>
        <p><%= comment.body %></p>
        <p class="comment-detail">Created on <%= comment.created_at.strftime("%B %d, %Y") %></p>
      </div>
    </div>
  <% end %>
<% end %>
